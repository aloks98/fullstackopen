(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(13),r=t.n(c),l=(t(19),t(2)),u=function(e){var n=e.personsToShow,t=e.deleteContact;return n.map((function(e){return o.a.createElement("div",null,o.a.createElement("p",null,e.name," ",e.number,o.a.createElement("button",{onClick:function(){return t(e.id,e.name)}},"Delete")))}))},i=function(e){return o.a.createElement("form",{onSubmit:e.addContact},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.newName,onChange:e.handlePhonebookChange})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},m=function(e){return o.a.createElement("div",null,"show names with: ",o.a.createElement("input",{value:e.filter,onChange:e.handleFilterChange}))},s=t(3),d=t.n(s),f=function(e){var n=e.message;return null===n?null:"fail"===n.type?o.a.createElement("div",{className:"error"},n.text):o.a.createElement("div",{className:"success"},n.text)},h="http://localhost:3001/persons",b=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),b=s[0],v=s[1],p=Object(a.useState)(""),E=Object(l.a)(p,2),g=E[0],w=E[1],C=Object(a.useState)(""),j=Object(l.a)(C,2),k=j[0],O=j[1],y=Object(a.useState)(null),N=Object(l.a)(y,2),S=N[0],x=N[1];Object(a.useEffect)((function(){d.a.get("".concat(h)).then((function(e){c(e.data)})).catch((function(e){console.log(e)}))}),[]);var T=k?t.filter((function(e){return-1!==e.name.toLowerCase().search(k.toLowerCase())})):t;return o.a.createElement("div",null,o.a.createElement(f,{message:S}),o.a.createElement("h1",null,"Phonebook Filter"),o.a.createElement(m,{filter:k,handleFilterChange:function(e){O(e.target.value)}}),o.a.createElement("h1",null,"Add a new"),o.a.createElement(i,{addContact:function(e){e.preventDefault();var n={id:t.length+1,name:b,number:g};if(t.map((function(e){return e.name})).includes(n.name)){var a={name:b,number:g};if(window.confirm("".concat(n.name," is already added to phonebook. Update the number?"))){var o=t.filter((function(e){return e.name===n.name}));d.a.put("".concat(h,"/").concat(o[0].id),a).then((function(e){x({text:"Contact '".concat(n.name,"' updated"),type:"success"}),setTimeout((function(){x(null)}),3e3)})).catch((function(e){return console.log(e)}));var r=t.findIndex((function(e){return e.id===o[0].id}));t[r].number=n.number}}else d.a.post("".concat(h),n).then((function(e){x({text:"Contact '".concat(n.name,"' added"),type:"success"}),setTimeout((function(){x(null)}),3e3)})).catch((function(e){console.log(e)})),c(t.concat(n));v(""),w("")},newName:b,newNumber:g,handlePhonebookChange:function(e){v(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),o.a.createElement("h1",null,"Numbers"),o.a.createElement("div",null,o.a.createElement(u,{personsToShow:T,deleteContact:function(e,n){if(window.confirm("Do you want to delete ".concat(n))){console.log(e,n),d.a.delete("".concat(h,"/").concat(e)).then((function(e){console.log(e)})).catch((function(e){x({text:"Contact '".concat(n,"' was already removed from server"),type:"fail"}),setTimeout((function(){x(null)}),5e3)}));var a=t.filter((function(n){return n.id!==e}));c(a)}}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.fff1b447.chunk.js.map